<html lang="en">
  <head>
    <link rel="icon" type="image/ico" href="./img/icons/favicon.ico">
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, viewport-fit=cover, minimal-ui" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <title>Game</title>
    <script defer src="./js/web/core.js" type="text/javascript"></script>
    <link rel="stylesheet" href="./css/game.css" />
  </head>
  <body oncontextmenu="return false;">
    <div id="ambience-overlay" class="ui"></div>
    <div id="loading-screen" class="ui">
      <button type="button" id="start-game-button" class="ui">Start Game</button>
      <div id="progress-bar-container" class="ui">
        <div id="loading-bar-left" class="ui"></div>
        <div id="loading-bar-center" class="ui"></div>
        <div id="loading-bar-right" class="ui"></div>
        <div id="progress-bar" class="ui"></div>
      </div>
    </div>
    <div id="game-notification-container" class="ui">
      <div id="game-notification-message" class="ui"></div>
    </div>
    <div id="overlay" class="ui">
      <!-- Mobile UI Backdrop -->
      <div id="mobile-ui-backdrop"></div>
      <div id="pause-menu-container" class="ui">
        <div id="pause-menu" class="ui">
          <div id="pause-menu-button-container" class="ui">
            <button type="button" id="pause-menu-action-back" class="ui"></button>
            <button type="button" id="pause-menu-action-options" class="ui"></button>
            <button type="button" id="pause-menu-action-exit" class="ui"></button>
          </div>
        </div>
      </div>
      <div id="options-menu-container" class="ui">
        <div id="options-menu" class="ui">
          <div id="options-menu-selections-container" class="ui">
            <div id="options-menu-left-container" class="ui">
              <label id="limit-fps-label" class="ui">FPS:</label>
              <label id="music-volume-label" class="ui">Music:</label>
              <label id="effects-volume-label" class="ui">Effects:</label>
              <label id="muted-label" class="ui">Muted:</label>
            </div>
            <div id="options-menu-right-container" class="ui">
              <input type="range" min="30" max="240" value="50" step="1" class="slider" id="fps-slider" class="ui">
              <input type="range" min="0" max="100" value="50" step="1" class="slider" id="music-slider" class="ui">
              <input type="range" min="0" max="100" value="50" step="1" class="slider" id="effects-slider" class="ui">
              <input type="checkbox" id="muted-checkbox" class="ui">
            </div>
          </div>
        </div>
      </div>
      <div id="server-time-container" class="ui"><p id="server-time-value">7:40:46 PM</p></div>
      <div id="debug-container" class="ui">
        <div id="onlinecount" class="ui"></div>
        <div id="packets-sent-received" class="ui">Sent: 0, Received: 0</div>
        <div id="position" class="ui">Position: 0, 0</div>
        <div id="loaded-chunks" class="ui">Loaded Chunks: 0</div>
        <div id="collision-debug-toggle" class="ui">
          <label for="collision-debug-checkbox" class="ui">Collision Debug:</label>
          <input type="checkbox" id="collision-debug-checkbox" class="ui">
        </div>
        <div id="chunk-outline-debug-toggle" class="ui">
          <label for="chunk-outline-debug-checkbox" class="ui">Chunk Outlines:</label>
          <input type="checkbox" id="chunk-outline-debug-checkbox" class="ui">
        </div>
        <div id="collision-tiles-debug-toggle" class="ui">
          <label for="collision-tiles-debug-checkbox" class="ui">Collision Tiles:</label>
          <input type="checkbox" id="collision-tiles-debug-checkbox" class="ui">
        </div>
        <div id="nopvp-debug-toggle" class="ui">
          <label for="nopvp-debug-checkbox" class="ui">No-PVP Zones:</label>
          <input type="checkbox" id="nopvp-debug-checkbox" class="ui">
        </div>
        <div id="wireframe-debug-toggle" class="ui">
          <label for="wireframe-debug-checkbox" class="ui">Wireframe Mode:</label>
          <input type="checkbox" id="wireframe-debug-checkbox" class="ui">
        </div>
        <div id="show-grid-toggle" class="ui">
          <label for="show-grid-checkbox" class="ui">Show Grid:</label>
          <input type="checkbox" id="show-grid-checkbox" class="ui">
        </div>
      </div>
      <!-- 
      <div id="map-container" class="ui">
        <img id="map-border" src="../img/ui/ui-map.png" fetchpriority="high" class="ui"></img>
        <div id="map" class="ui"></div>
      </div> -->
      <div id="chat-container" class="ui">
        <div id="chat" class="ui">
          <div id="chat-messages" class="ui"></div>
        </div>
        <input id="chat-input" type="text" placeholder="Type here..." spellcheck="false" autocomplete="off" class="ui"/>
      </div>
      <div id="full-map" class="ui">
      </div>
      <div id="inventory" class="ui">
        <div id="grid" class="ui"></div>
        <div id="currency-display" class="ui">
          <div class="currency-item">
            <div class="currency-icon currency-icon-gold"></div>
            <span id="currency-gold" class="currency-amount">0</span>
          </div>
          <div class="currency-item">
            <div class="currency-icon currency-icon-silver"></div>
            <span id="currency-silver" class="currency-amount">0</span>
          </div>
          <div class="currency-item">
            <div class="currency-icon currency-icon-copper"></div>
            <span id="currency-copper" class="currency-amount">0</span>
          </div>
        </div>
      </div>
      <div id="stat-screen" class="ui">
        <div id="stats-screen-username-container" class="ui">
          <label id="stats-screen-username-label" class="ui">Username</label>
        </div>
        <div id="equipment-left-column" class="ui">
          <div class="slot empty ui" data-slot="helmet"></div>
          <div class="slot empty ui" data-slot="necklace"></div>
          <div class="slot empty ui" data-slot="shoulderguards"></div>
          <div class="slot empty ui" data-slot="chestplate"></div>
          <div class="slot empty ui" data-slot="wristguards"></div>
          <div class="slot empty ui" data-slot="gloves"></div>
          <div class="slot empty ui" data-slot="belt"></div>
          <div class="slot empty ui" data-slot="pants"></div>
        </div>
        <div id="stats-screen-player-info" class="ui">
          <label id="stats-screen-level-label" class="ui">Level:</label>
          <label id="stats-screen-health-label" class="ui">Health:</label>
          <label id="stats-screen-mana-label" class="ui">Mana:</label>
          <label id="stats-screen-damage-label" class="ui">Damage:</label>
          <label id="stats-screen-armor-label" class="ui">Armor:</label>
          <label id="stats-screen-crit-chance-label" class="ui">Critical Chance:</label>
          <label id="stats-screen-crit-damage-label" class="ui">Critical Damage:</label>
          <label id="stats-screen-avoidance-label" class="ui">Avoidance:</label>
        </div>
        <div id="equipment-right-column" class="ui">
          <div class="slot empty ui" data-slot="boots"></div>
          <div class="slot empty ui" data-slot="ring_1"></div>
          <div class="slot empty ui" data-slot="ring_2"></div>
          <div class="slot empty ui" data-slot="trinket_1"></div>
          <div class="slot empty ui" data-slot="trinket_2"></div>
        </div>
        <div id="equipment-bottom-center" class="ui">
          <div class="slot empty ui" data-slot="weapon"></div>
          <div class="slot empty ui" data-slot="off_hand_weapon"></div>
        </div>
      </div>
      <div id="castbar" class="ui">
        <div id="castbar-progress" class="ui"></div>
        <div id="castbar-text" class="ui"></div>
      </div>
      <div id="hotbar" class="ui">
        <div id="level-container" class="ui">1</div>
        <div id="health-bar-container" class="ui">
          <div id="health-progress-bar" class="ui health">
          </div>
        </div>
        <div id="stamina-bar-container" class="ui">
          <div id="stamina-progress-bar" class="ui">
          </div>
        </div>
        <div id="xp-bar-container">
          <div id="xp-bar"></div>
        </div>
        <div id="grid" class="ui">
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
        </div>
      </div>
      <div id="spell-book-container" class="ui">
        <div id="grid" class="ui">
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
        </div>
      </div>
      <div id="collectables-container" class="ui">
        <div id="grid" class="ui">
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
          <div class="slot empty ui"></div>
        </div>
      </div>
      <div id="friends-list-container" class="ui">
        <input type="text" id="friends-list-search" placeholder="Search friends..." class="ui" autocomplete="off" spellcheck="false">
        <div id="friends-list" class="ui"> 
          <div id="friends-list-content" class="ui"></div>
        </div>
      </div>
      <div id="guild-container" class="ui">
        <div id="guild-info" class="ui">
          <div id="guild-member-count" class="ui"></div>
          <div id="guild-name" class="ui"></div>
          <div id="guild-rank" class="ui"></div>
          <div id="guild-members" class="ui"></div>
        </div>
          <div id="guild-leave-button" class="ui">Leave Guild</div>
          <div id="guild-invite-input-container" class="ui">
            <input type="text" id="guild-invite-input" placeholder="Player Name" class="ui" autocomplete="off" spellcheck="false">
            <button type="button" id="guild-invite-submit-button" class="ui">Invite</button>
          </div>
      </div>
      <div id="party-container" class="ui"></div>
      <!-- Admin Panel -->
      <div id="admin-panel-container" class="ui">
        <div id="admin-panel-content" class="ui">
          <!-- Target Player Section -->
          <div class="admin-section ui">
            <label class="admin-label ui">Target Player</label>
            <select id="admin-player-select" class="admin-select ui">
              <option value="">Select a player...</option>
            </select>
          </div>

          <!-- Self Commands Section -->
          <div class="admin-section ui">
            <label class="admin-label ui">Self Commands</label>
            <div class="admin-button-grid ui">
              <button type="button" id="admin-noclip" class="admin-button ui">Noclip</button>
              <button type="button" id="admin-stealth" class="admin-button ui">Stealth</button>
            </div>
          </div>

          <!-- Player Commands Section -->
          <div class="admin-section ui">
            <label class="admin-label ui">Player Management</label>
            <div class="admin-button-grid ui">
              <button type="button" id="admin-summon" class="admin-button ui">Summon</button>
              <button type="button" id="admin-teleport" class="admin-button ui">Teleport To</button>
              <button type="button" id="admin-respawn" class="admin-button ui">Respawn</button>
              <button type="button" id="admin-kick" class="admin-button admin-button-warning ui">Kick</button>
              <button type="button" id="admin-ban" class="admin-button admin-button-danger ui">Ban</button>
              <button type="button" id="admin-unban" class="admin-button ui">Unban</button>
              <button type="button" id="admin-toggle-admin" class="admin-button admin-button-special ui">Toggle Admin</button>
            </div>
          </div>

          <!-- Server Commands Section -->
          <div class="admin-section ui">
            <label class="admin-label ui">Server Control</label>
            <input type="text" id="admin-map-input" class="admin-input ui" placeholder="Map name (leave empty for current map)" />
            <button type="button" id="admin-reload-map" class="admin-button admin-button-full ui">Reload Map</button>
          </div>

          <!-- Warp Section -->
          <div class="admin-section ui">
            <label class="admin-label ui">Warp to Map</label>
            <input type="text" id="admin-warp-input" class="admin-input ui" placeholder="Map name to warp to" />
            <button type="button" id="admin-warp" class="admin-button admin-button-full ui">Warp</button>
          </div>

          <!-- Broadcast Section -->
          <div class="admin-section ui">
            <label class="admin-label ui">Broadcast Message</label>
            <input type="text" id="admin-broadcast-input" class="admin-input ui" placeholder="Type your message..." />
            <div class="admin-button-grid ui">
              <button type="button" id="admin-broadcast-all" class="admin-button ui">All Players</button>
              <button type="button" id="admin-broadcast-map" class="admin-button ui">Current Map</button>
              <button type="button" id="admin-broadcast-admins" class="admin-button ui">Admins Only</button>
            </div>
          </div>
        </div>
      </div>
      <!-- Tile Editor Floating Panels -->
      <div id="tile-editor-container" class="ui" style="display: none;">
        <!-- Toolbar Panel (no header, entire panel is draggable) -->
        <div id="tile-editor-toolbar-panel" class="ui te-floating-panel te-toolbar-draggable">
          <div id="tile-editor-toolbar" class="ui">
            <button type="button" id="te-tool-paint" class="ui te-tool active" title="Paint (P)">üñåÔ∏è</button>
            <button type="button" id="te-tool-erase" class="ui te-tool" title="Erase (E)">üóëÔ∏è</button>
            <button type="button" id="te-undo" class="ui" title="Undo (Ctrl+Z)">‚Ü∂</button>
            <button type="button" id="te-redo" class="ui" title="Redo (Ctrl+Y)">‚Ü∑</button>
            <button type="button" id="te-copy" class="ui te-tool" title="Copy (C)">üìã</button>
            <button type="button" id="te-paste" class="ui te-tool" title="Paste (V)">üìÑ</button>
            <button type="button" id="te-save" class="ui" title="Save">üíæ</button>
            <button type="button" id="te-reset-view" class="ui" title="Reset Panel Positions">üîÑ</button>
            <button type="button" id="te-toggle-opacity" class="ui" title="Toggle Layer Opacity">üëÅÔ∏è</button>
            <button type="button" id="te-toggle-grid" class="ui" title="Toggle Grid">‚¨õ</button>
          </div>
        </div>

        <!-- Layers Panel (no header, entire panel is draggable) -->
        <div id="tile-editor-layers-panel" class="ui te-floating-panel te-layers-draggable">
          <div id="tile-editor-layers-list" class="ui"></div>
        </div>

        <!-- Tileset Panel -->
        <div id="tile-editor-tileset-panel" class="ui te-floating-panel">
          <div class="te-panel-header ui">
            <span class="te-panel-title ui">Tile Editor</span>
            <button type="button" class="te-panel-close ui" data-panel="tileset">√ó</button>
          </div>
          <div class="te-panel-content ui">
            <div id="tile-editor-tileset-tabs" class="ui"></div>
            <div id="tile-editor-tileset-container" class="ui">
              <canvas id="tile-editor-tileset-canvas" class="ui"></canvas>
            </div>
          </div>
          <div class="te-resize-handle ui"></div>
        </div>
      </div>
    </div>
    <!-- Item Tooltip -->
    <div id="item-tooltip" class="ui" style="display: none;">
      <div id="tooltip-name" class="ui"></div>
      <div id="tooltip-type" class="ui"></div>
      <div id="tooltip-stats" class="ui"></div>
      <div id="tooltip-description" class="ui"></div>
    </div>
    <!-- Mobile UI Toggle Buttons -->
    <div id="mobile-ui-buttons">
      <button id="mobile-inventory-button" type="button" class="mobile-ui-btn" title="Inventory">üéí</button>
      <button id="mobile-spellbook-button" type="button" class="mobile-ui-btn" title="Spellbook">üìñ</button>
      <button id="mobile-collectables-button" type="button" class="mobile-ui-btn" title="Collectables">üíé</button>
      <button id="mobile-friends-button" type="button" class="mobile-ui-btn" title="Friends">üë•</button>
      <button id="mobile-guild-button" type="button" class="mobile-ui-btn" title="Guild">üõ°Ô∏è</button>
    </div>
    <!-- Virtual Joystick -->
    <div id="virtual-joystick-wrapper">
      <div id="virtual-joystick-container">
        <div id="virtual-joystick-base"></div>
        <div id="virtual-joystick-stick"></div>
      </div>
      <button id="virtual-mount-button" type="button">
        <span>üê¥</span>
      </button>
    </div>
    <canvas id="game"></canvas>
    <canvas id="weather"></canvas>
  </body>
</html>
